import * as cdk from "aws-cdk-lib";
import * as ec2 from "aws-cdk-lib/aws-ec2";
import * as efs from "aws-cdk-lib/aws-efs";

const vpc = new ec2.Vpc(this, "AppVPC", {
  vpnGateway: false,
  natGateways: 0,
  vpcName: "AppVPC",
});

const filesystem = new efs.FileSystem(this, "AppFileSystem", {
  vpc: vpc,
  fileSystemName: "AppFileSystem",
  removalPolicy: cdk.RemovalPolicy.DESTROY,
});

const accessPoint = filesystem.addAccessPoint("AppAccessPoint", {
  path: "/efs",
  posixUser: {
    uid: "1000",
    gid: "1000",
  },
  createAcl: {
    ownerUid: "1000",
    ownerGid: "1000",
    permissions: "0777",
  },
});

//       filesystem: lambda.FileSystem.fromEfsAccessPoint(accessPoint, '/mnt/efs'),
